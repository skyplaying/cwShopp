(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/service/addService/addService"],{"1d94":function(e,i,t){"use strict";var s=function(){var e=this,i=e.$createElement;e._self._c},r=[];t.d(i,"a",function(){return s}),t.d(i,"b",function(){return r})},"25de":function(e,i,t){"use strict";t.r(i);var s=t("1d94"),r=t("dd01");for(var c in r)"default"!==c&&function(e){t.d(i,e,function(){return r[e]})}(c);t("6ea2");var o=t("2877"),n=Object(o["a"])(r["default"],s["a"],s["b"],!1,null,null,null);i["default"]=n.exports},"42c6":function(e,i,t){},"6ea2":function(e,i,t){"use strict";var s=t("42c6"),r=t.n(s);r.a},"8fc2":function(e,i,t){"use strict";(function(e){var s;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=function(){return t.e("components/mc-image-upload/mc-image-upload").then(t.bind(null,"b168"))},c={data:function(){return{isok:!0,isUnits:"",isSelect:!1,unitsList:["单位","天","月","年","次"],selectext:"",serverUrl:"https://test.qipinke.com/petoutServer_test/api/file/uploadImage",serviceId:"",serviceType:"",serviceName:"",servicePrice:"",servicePriceUnit:"",serviceRemark:"",serviceImgLink:"",sparkServiceSubPriceData:"",storeName:"",storeList:[],storesInfo:"",storeNameList:[],storeId:"",editService:"",editImgPath:"",editType:""}},components:{uploadImg:r},onLoad:function(i){s=this,this.queryAllStore(),console.log(i),this.editService=e.getStorageSync("editService");var t=this.editService;this.editType=i.type,"update"==i.type&&(this.serviceId=t.serviceId,this.serviceName=t.serviceName,this.servicePrice=t.servicePrice,this.servicePriceUnit=t.servicePriceUnit,this.serviceImgLink=t.serviceImageLink,this.serviceRemark=t.serviceRemark)},methods:{getImgData:function(e){console.log(e);var i=e[1],t=e[0];console.log(i,t),this.serviceImgLink=t},unitsClick:function(){s.isSelect=!0},addService:function(){var i=this,t=this.servicePrice,s=this.$api.isNumber(t),r=this.storeName&&this.serviceName&&this.servicePrice&&s&&this.serviceRemark&&this.serviceImgLink;console.log(r,s),s?r?this.editType?this.$api.updateService({storeId:this.storeId,serviceId:this.serviceId,serviceType:this.serviceType||3,serviceName:this.serviceName,servicePrice:this.servicePrice,servicePriceUnit:this.servicePriceUnit||"次",serviceRemark:this.serviceRemark,serviceImgLink:this.serviceImgLink,sparkServiceSubPriceData:this.sparkServiceSubPriceData||""}).then(function(t){console.log(t),1e5==t.data.code&&(i.$api.showToast("修改成功"),setTimeout(function(){e.redirectTo({url:"../publishingService/publishingService"})},800))}):this.$api.addService({storeId:this.storeId,serviceType:this.serviceType||3,serviceName:this.serviceName,servicePrice:this.servicePrice,servicePriceUnit:this.servicePriceUnit||"次",serviceRemark:this.serviceRemark,serviceImgLink:this.serviceImgLink,sparkServiceSubPriceData:this.sparkServiceSubPriceData||""}).then(function(t){console.log(t),1e5==t.data.code&&(i.$api.showToast("添加服务成功"),setTimeout(function(){e.redirectTo({url:"../publishingService/publishingService"})},800))}):this.$api.showToast("服务信息不完整"):this.$api.showToast("价格须为数字")},selectStore:function(e){var i=e.detail.value;this.storeId=this.storeList[i].storeId,this.storeName=this.storeList[i].storeName,console.log(e)},selectUnits:function(e){var i=this;e&&(this.servicePriceUnit=e,this.selectext=e,setTimeout(function(){i.isSelect=!1},100))},queryAllStore:function(){var i=this;this.servicerUserId=e.getStorageSync("userId"),this.$api.selectAllStore(this.servicerUserId).then(function(t){console.log(t.data.storesInfo[0]),i.storesInfo=t.data.storesInfo;for(var s={},r=0;r<i.storesInfo.length;r++)s.storeName=i.storesInfo[r].storeName,s.storeId=i.storesInfo[r].storeId,i.storeList.push(s),i.storeNameList.push(i.storesInfo[r].storeName),i.storesInfo.length<=1&&(i.storeName=i.storesInfo[0].storeName,i.storeId=i.storesInfo[0].storeId);console.log(i.storeList),e.setStorageSync("storesInfo",t.data.storesInfo)})}}};i.default=c}).call(this,t("543d")["default"])},dd01:function(e,i,t){"use strict";t.r(i);var s=t("8fc2"),r=t.n(s);for(var c in s)"default"!==c&&function(e){t.d(i,e,function(){return s[e]})}(c);i["default"]=r.a}},[["7e6c","common/runtime","common/vendor"]]]);