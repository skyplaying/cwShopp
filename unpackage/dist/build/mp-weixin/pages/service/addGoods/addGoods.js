(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/service/addGoods/addGoods"],{"2c94":function(o,s,t){"use strict";t.r(s);var e=t("a27b"),i=t.n(e);for(var d in e)"default"!==d&&function(o){t.d(s,o,function(){return e[o]})}(d);s["default"]=i.a},"2d83c":function(o,s,t){"use strict";var e=t("e198"),i=t.n(e);i.a},a065:function(o,s,t){"use strict";var e=function(){var o=this,s=o.$createElement;o._self._c},i=[];t.d(s,"a",function(){return e}),t.d(s,"b",function(){return i})},a27b:function(o,s,t){"use strict";(function(o){var e;Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=function(){return t.e("components/mc-image-upload/mc-image-upload").then(t.bind(null,"b168"))},d={data:function(){return{isok:!0,isUnits:"",isSelect:!1,goodsTypeList:[],selectext:"",serverUrl:"https://test.qipinke.com/petoutServer_test/api/file/uploadImage",goodsImageLink:"",goodsTypeId:"",goodsName:"",goodsRemark:"’",goodsPrice:"",goodsId:"",storeName:"",storeList:[],storesInfo:"",storeNameList:[],storeId:"",editgoods:"",editImgPath:"",editType:""}},components:{uploadImg:i},onLoad:function(s){if(e=this,console.log(s.type),this.editType=s.type,s.type){this.editgoods=o.getStorageSync("editgoods");var t=this.editgoods;this.goodsId=t.goodsId,this.goodsTypeId=t.goodsTypeId,this.goodsName=t.goodsName,this.goodsPrice=t.goodsPrice,this.goodsRemark=t.goodsRemark,this.goodsImageLink=t.goodsImageLink,this.editImgPath=t.goodsImageLink}this.init()},methods:{init:function(){this.queryAllStore(),this.queryAllGoodsType()},queryAllGoodsType:function(){var o=this;this.$api.selectAllGoodsTypeInfo({}).then(function(s){console.log(s),o.goodsTypeList=s.data.goodsTypesInfo,console.log(o.goodsTypeList)})},queryAllStore:function(){var s=this;this.servicerUserId=o.getStorageSync("userId"),this.$api.selectAllStore(this.servicerUserId).then(function(t){console.log(t.data.storesInfo[0]),s.storesInfo=t.data.storesInfo;for(var e={},i=0;i<s.storesInfo.length;i++)e.storeName=s.storesInfo[i].storeName,e.storeId=s.storesInfo[i].storeId,s.storeList.push(e),s.storeNameList.push(s.storesInfo[i].storeName);console.log(s.storeList),o.setStorageSync("storesInfo",t.data.storesInfo)})},selectStore:function(o){var s=o.detail.value;this.storeId=this.storeList[s].storeId,this.storeName=this.storeList[s].storeName,console.log(o)},getImgData:function(o){console.log(o);var s=o[1],t=o[0];console.log(s,t),this.goodsImageLink=t},unitsClick:function(){e.isSelect=!0},selectUnits:function(o,s){var t=this;this.goodsTypeId=s,console.log("类型",this.goodsTypeId),o&&(this.selectext=o,setTimeout(function(){t.isSelect=!1},100))},addGoodsInfo:function(){var s=this,t=this.storeId&&this.goodsTypeId&&this.goodsName&&this.goodsPrice&&this.goodsRemark&&this.goodsImageLink,e=this.$api.isNumber(this.goodsPrice);e||this.$api.showToast("价格须为数字"),console.log(t),this.editType?t&&e?this.$api.updateGoods({storeId:this.storeId,goodsTypeId:this.goodsTypeId,goodsName:this.goodsName,goodsPrice:this.goodsPrice,goodsRemark:this.goodsRemark,goodsImageLink:this.goodsImageLink}).then(function(t){console.log(t),1e5==t.data.code&&(s.$api.showToast("修改成功"),o.navigateTo({url:"../postTrade/postTrade"}))}):this.$api.showToast("商品信息不完整"):t&&e?this.$api.addGoods({storeId:this.storeId,goodsTypeId:this.goodsTypeId,goodsName:this.goodsName,goodsPrice:this.goodsPrice,goodsRemark:this.goodsRemark,goodsImageLink:this.goodsImageLink}).then(function(t){console.log(t),1e5==t.data.code&&(s.$api.showToast("添加商品成功"),o.navigateTo({url:"../postTrade/postTrade"}))}):this.$api.showToast("商品信息不完整")}}};s.default=d}).call(this,t("543d")["default"])},a352:function(o,s,t){"use strict";t.r(s);var e=t("a065"),i=t("2c94");for(var d in i)"default"!==d&&function(o){t.d(s,o,function(){return i[o]})}(d);t("2d83c");var n=t("2877"),a=Object(n["a"])(i["default"],e["a"],e["b"],!1,null,null,null);s["default"]=a.exports},e198:function(o,s,t){}},[["f2a3","common/runtime","common/vendor"]]]);